# Mini JS Parser

ä¸€ä¸ªä½¿ç”¨ TypeScript ç¼–å†™çš„ç®€æ˜“ JavaScript è§£æå™¨ï¼ˆParserï¼‰ã€‚å®ƒå®ç°äº†ä»æºç åˆ°æŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰çš„å®Œæ•´è§£æè¿‡ç¨‹ï¼ŒåŒ…æ‹¬è¯æ³•åˆ†æï¼ˆScannerï¼‰å’Œè¯­æ³•åˆ†æï¼ˆParserï¼‰ã€‚

æœ¬é¡¹ç›®æ—¨åœ¨ç”¨äºå­¦ä¹ å’Œç†è§£ç¼–è¯‘å™¨å‰ç«¯çš„åŸºæœ¬åŸç†ï¼Œæ”¯æŒ JavaScript çš„ä¸€ä¸ªå¸¸ç”¨å­é›†ã€‚

## âœ¨ ç‰¹æ€§

- **é›¶ä¾èµ–**ï¼šæ ¸å¿ƒè§£æé€»è¾‘ä¸ä¾èµ–ä»»ä½•ç¬¬ä¸‰æ–¹åº“ã€‚
- **æ‰‹å†™è§£æå™¨**ï¼šé‡‡ç”¨é€’å½’ä¸‹é™ï¼ˆRecursive Descentï¼‰ç®—æ³•æ‰‹åŠ¨å®ç°ã€‚
- **å®Œæ•´æµç¨‹**ï¼šåŒ…å« Scannerï¼ˆè¯æ³•åˆ†æå™¨ï¼‰å’Œ Parserï¼ˆè¯­æ³•åˆ†æå™¨ï¼‰ã€‚
- **ç±»å‹å®‰å…¨**ï¼šå®Œå…¨ä½¿ç”¨ TypeScript ç¼–å†™ï¼Œæä¾›å®Œæ•´çš„ AST ç±»å‹å®šä¹‰ã€‚

## ğŸš€ åŠŸèƒ½æ”¯æŒ

æ”¯æŒä»¥ä¸‹ JavaScript è¯­æ³•ç‰¹æ€§çš„è§£æï¼š

- **å˜é‡å£°æ˜**: `let`
- **å‡½æ•°å£°æ˜**: `function name(args) { ... }`
- **æ§åˆ¶æµ**:
  - `if` / `else`
  - `while`
  - `for` (åŒ…æ‹¬ `for...in`)
  - `return`
- **è¡¨è¾¾å¼**:
  - èµ‹å€¼ (`=`)
  - äºŒå…ƒè¿ç®— (`+`, `-`, `*`, `/`, `&&`, `||`, `==`, `!=`, `<`, `>`)
  - ä¸€å…ƒè¿ç®— (`++`, `--`, `+`, `-`, `delete`)
  - å‡½æ•°è°ƒç”¨
  - æˆå‘˜è®¿é—® (`.` å’Œ `[]`)
  - å­—é¢é‡ (æ•°å­—, å­—ç¬¦ä¸², å¸ƒå°”å€¼, æ•°ç»„ `[]`, å¯¹è±¡ `{}`)

è¯¦ç»†çš„è¯­æ³•å®šä¹‰è¯·å‚è€ƒ [Grammar æ–‡æ¡£](./docs/grammar.md)ã€‚

## ğŸ“¦ å®‰è£…ä¸ä½¿ç”¨

### å®‰è£…ä¾èµ–

```bash
pnpm install
```

### ä½¿ç”¨ç¤ºä¾‹

```typescript
import { createParser } from './src';

const code = `
function add(a, b) {
  return a + b;
}
let result = add(1, 2);
`;

// åˆ›å»ºè§£æå™¨å®ä¾‹
const parser = createParser(code);

// è§£æç”Ÿæˆ AST
const sourceFile = parser.parseSourceFile();

console.log(JSON.stringify(sourceFile, null, 2));
```

## ğŸ› ï¸ å¼€å‘

æœ¬é¡¹ç›®ä½¿ç”¨ `pnpm` è¿›è¡ŒåŒ…ç®¡ç†ï¼Œ`vitest` è¿›è¡Œæµ‹è¯•ã€‚

### æ„å»º

```bash
pnpm build
```

### è¿è¡Œæµ‹è¯•

```bash
pnpm test
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

- `src/`
  - `scanner.ts`: è¯æ³•åˆ†æå™¨ï¼Œå°†æºä»£ç è½¬æ¢ä¸º Token æµã€‚
  - `parser.ts`: è¯­æ³•åˆ†æå™¨ï¼Œå°† Token æµè½¬æ¢ä¸º ASTã€‚
  - `ast.ts`: å®šä¹‰ AST èŠ‚ç‚¹ç±»å‹å’Œè¯­æ³•ç§ç±»ï¼ˆSyntaxKindï¼‰ã€‚
  - `index.ts`: ç»Ÿä¸€å¯¼å‡ºã€‚
- `tests/`: åŒ…å«é’ˆå¯¹ Scanner å’Œ Parser çš„å•å…ƒæµ‹è¯•ã€‚
- `docs/`: æ–‡æ¡£ç›®å½•ï¼ŒåŒ…å«è¯­æ³•å®šä¹‰ã€‚

## ğŸ“ License

ISC
